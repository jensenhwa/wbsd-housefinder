<!DOCTYPE html>
<html>
  <head>
    <title>Properties Within Our District</title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <link type="text/css" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500">
	<style>
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
		font-family: Roboto;
	  }
	  
	  ul {
		margin-bottom: 0;
		overflow: hidden;
	  }
      #map {
        min-height: 400px;
		clear:both;
      }
    
      #locationField, #controls {
        position: relative;
      }
      #autocomplete {
        top: 0px;
        left: 0px;
        width: 470px;
      }
      .label {
        text-align: right;
        font-weight: bold;
        width: 100px;
        color: #303030;
      }
      #address {
        border: 1px solid #000090;
        background-color: #f0f0ff;
        width: 480px;
        padding-right: 2px;
		margin-bottom: 5px;
      }
      #address td {
        font-size: 10pt;
      }
      .field {
        width: 99%;
      }
      .slimField {
        width: 80px;
      }
      .wideField {
        width: 200px;
      }
      #locationField {
        margin-bottom: 2px;
		z-index: 1;
      }
	  
	  #addressInput {
		float: left;
		margin-right: 20px;
	  }
	  #outputLeft {
		text-align: center;
		align-self: center;
	  }
	  #outputLeftContainer {
		display: flex;
		height: 150px;
		justify-content: center;
	  }
	  #outputRight {
		align-self: center;
	  }
	  #outputRightContainer {
		display: flex;
		height: 171px;
	  }
	  #result {
		margin-top: 0;
	  }
	  .alert {
		vertical-align: middle;
	  }
	  #reset {
	    visibility: hidden;
	  }
    </style>
  </head>

  <body>
	<div id="addressInput">
	  <div id="locationField">
		<input id="autocomplete" placeholder="Enter your address" onFocus="geolocate()" type="text">
		<button id="reset" type="reset" onclick="restart()">Start Over</button>
	  </div>
	  <div id="outputLeftContainer">
		<div id="outputLeft"></div>
	  </div>
	</div>
	<div id="outputRightContainer">
	  <div id="outputRight"><img src="alert.png" alt="alert" width="50" class="alert">Please enable Javascript in your browser.</div>
	</div>
  
	<div id="map"></div>
    <script>
/**
 * Determines whether an address falls within the boundaries of the West Bloomfield School District.
 * 
 * @author Jensen Hwa
 * @version 2015.11.2
 */
	
var map, districtBoundary, placeSearch, autocomplete, mapCheck, dbCheck;
var marker;
var mobile;
var mapCenter = {lat: 42.5719205, lng: -83.3814459};
var mapZoom = 13;
var outputRight = document.getElementById('outputRight');
var outputLeft = document.getElementById('outputLeft');
var componentForm = [
  "street_number",
  "route",
  "postal_code"
];
var parsedAddress = {};

// Clear the address text input.
function restart() {
	document.getElementById('autocomplete').value = "";
	begin();
}
//  Reset the map and output.
function begin() {
	outputLeft.innerHTML = "";
	outputRight.innerHTML = 'Enter your address to continue.<br>The address you provide will be checked to see if it falls within our boundaries as indicated on the map below, and if it is in our database.';
	document.getElementById('reset').style.visibility = 'hidden';
	marker.setMap(null);
	map.panTo(mapCenter);
	map.setZoom(mapZoom);
}

function initialize() {
  // Determine whether the window is viewed in a narrow mobile format, and set widths and heights appropriately.
  outputLeft.innerHTML = "";
  outputRight.innerHTML = 'Enter your address to continue.<br>The address you provide will be checked to see if it falls within our boundaries as indicated on the map below, and if it is in our database.';
  document.getElementById("autocomplete").style.maxWidth = window.innerWidth - 4 + "px";
  document.getElementById("locationField").style.width = document.getElementById("autocomplete").offsetWidth + "px";
  if (document.getElementById("addressInput").offsetHeight > document.getElementById("outputRight").offsetHeight) {
	document.getElementById("map").style.height = window.innerHeight - document.getElementById("addressInput").offsetHeight + "px";
	mobile = false;
  } else {
	document.getElementById('outputRightContainer').style.clear="both";
	document.getElementById("map").style.height = (window.innerHeight - document.getElementById("addressInput").offsetHeight - document.getElementById("outputRightContainer").offsetHeight) + "px";
	mapZoom = 12;
	mobile = true;
  }
  marker = new google.maps.Marker;
  map = new google.maps.Map(document.getElementById('map'), {
    zoom: mapZoom,
    center: mapCenter,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  });

  // Define the LatLng coordinates for the polygon's path.
  var boundaryCoords = [
    {lat: 42.606383000000001, lng: -83.42298699999999201},
    {lat: 42.60660299999999978, lng: -83.42300099999999929},
    {lat: 42.60663999999999874, lng: -83.42276799999999071},
    {lat: 42.60677899999999596, lng: -83.42263299999999049},
    {lat: 42.60714699999999766, lng: -83.42238399999999388},
    {lat: 42.60689500000000152, lng: -83.42196899999999005},
    {lat: 42.60674300000000159, lng: -83.42167899999999747},
    {lat: 42.60667300000000068, lng: -83.42153600000000324},
    {lat: 42.60680099999999726, lng: -83.42027199999999709},
    {lat: 42.60676799999999531, lng: -83.41953900000000033},
    {lat: 42.60676799999999531, lng: -83.41844399999999382},
    {lat: 42.60706700000000069, lng: -83.4130439999999993},
    {lat: 42.60709500000000105, lng: -83.41182399999999575},
    {lat: 42.60711200000000076, lng: -83.41125399999999956},
    {lat: 42.60714899999999972, lng: -83.409994999999995},
    {lat: 42.60716099999999784, lng: -83.40960699999999406},
    {lat: 42.6071889999999982, lng: -83.40838899999999967},
    {lat: 42.60719999999999885, lng: -83.40745099999999468},
    {lat: 42.6072330000000008, lng: -83.40616099999999733},
    {lat: 42.60725399999999752, lng: -83.40548199999999213},
    {lat: 42.60730499999999665, lng: -83.40377399999999852},
    {lat: 42.60732199999999636, lng: -83.4031789999999944},
    {lat: 42.60735100000000131, lng: -83.40238899999999944},
    {lat: 42.60739799999999633, lng: -83.40093499999998983},
    {lat: 42.60741499999999604, lng: -83.40036899999999775},
    {lat: 42.60749399999999554, lng: -83.39825700000000097},
    {lat: 42.61014199999999619, lng: -83.39839399999999614},
    {lat: 42.61083299999999952, lng: -83.39843999999999369},
    {lat: 42.61149199999999837, lng: -83.39846899999999152},
    {lat: 42.61185100000000148, lng: -83.398500999999996},
    {lat: 42.61299799999999749, lng: -83.39855799999999419},
    {lat: 42.61472899999999697, lng: -83.3986539999999934},
    {lat: 42.61624399999999468, lng: -83.39873399999999037},
    {lat: 42.61628599999999523, lng: -83.39845499999999845},
    {lat: 42.6162959999999984, lng: -83.39669800000000066},
    {lat: 42.61634300000000053, lng: -83.39550299999999083},
    {lat: 42.6163880000000006, lng: -83.39345000000000141},
    {lat: 42.61642899999999656, lng: -83.39257599999999115},
    {lat: 42.61643999999999721, lng: -83.3923459999999892},
    {lat: 42.61647899999999822, lng: -83.39101599999999337},
    {lat: 42.61649699999999541, lng: -83.39060700000000281},
    {lat: 42.61651699999999465, lng: -83.39021699999999271},
    {lat: 42.61651899999999671, lng: -83.3899589999999904},
    {lat: 42.61652000000000129, lng: -83.38882300000000214},
    {lat: 42.61652899999999988, lng: -83.38859499999999514},
    {lat: 42.61656999999999584, lng: -83.38761199999999008},
    {lat: 42.61660399999999527, lng: -83.38619799999999316},
    {lat: 42.61657999999999902, lng: -83.38514099999999019},
    {lat: 42.61659699999999873, lng: -83.38378799999999558},
    {lat: 42.61659499999999667, lng: -83.38302999999999088},
    {lat: 42.61657299999999537, lng: -83.38196499999999389},
    {lat: 42.61658200000000107, lng: -83.3812989999999985},
    {lat: 42.6165499999999966, lng: -83.38124799999999937},
    {lat: 42.6165499999999966, lng: -83.38087699999999813},
    {lat: 42.61678699999999509, lng: -83.38085099999999272},
    {lat: 42.6165850000000006, lng: -83.37950899999999876},
    {lat: 42.61656800000000089, lng: -83.37780599999999254},
    {lat: 42.61650999999999812, lng: -83.37693199999999649},
    {lat: 42.61632499999999624, lng: -83.37678999999999974},
    {lat: 42.61640200000000078, lng: -83.37661899999999093},
    {lat: 42.61689399999999495, lng: -83.37553299999999012},
    {lat: 42.61673899999999549, lng: -83.37513500000000022},
    {lat: 42.61590299999999587, lng: -83.37583499999999503},
    {lat: 42.61484799999999495, lng: -83.37560299999999813},
    {lat: 42.61391199999999913, lng: -83.37454799999999011},
    {lat: 42.61399099999999862, lng: -83.3737560000000002},
    {lat: 42.61403500000000122, lng: -83.37332399999999666},
    {lat: 42.61376299999999873, lng: -83.37342999999999904},
    {lat: 42.61337599999999526, lng: -83.37283800000000156},
    {lat: 42.61282699999999579, lng: -83.3719949999999983},
    {lat: 42.61236399999999946, lng: -83.3720610000000022},
    {lat: 42.611815, lng: -83.37213799999999253},
    {lat: 42.61173799999999545, lng: -83.36970199999998954},
    {lat: 42.61143599999999765, lng: -83.35998899999999878},
    {lat: 42.61373100000000136, lng: -83.35934299999999553},
    {lat: 42.61387399999999559, lng: -83.35930399999999452},
    {lat: 42.61618099999999743, lng: -83.35934199999999805},
    {lat: 42.61618599999999901, lng: -83.35917200000000093},
    {lat: 42.61626499999999851, lng: -83.35691500000000076},
    {lat: 42.6165239999999983, lng: -83.3569090000000017},
    {lat: 42.6173779999999951, lng: -83.35688999999999282},
    {lat: 42.61739399999999733, lng: -83.35694900000000018},
    {lat: 42.61739899999999892, lng: -83.35678500000000213},
    {lat: 42.61744399999999899, lng: -83.3555199999999985},
    {lat: 42.61747099999999477, lng: -83.354424999999992},
    {lat: 42.61751100000000037, lng: -83.35289399999999205},
    {lat: 42.6175399999999982, lng: -83.35195899999999369},
    {lat: 42.61756099999999492, lng: -83.35120999999999469},
    {lat: 42.61756599999999651, lng: -83.35103800000000263},
    {lat: 42.61756899999999604, lng: -83.35087299999999289},
    {lat: 42.61757799999999463, lng: -83.35036399999999901},
    {lat: 42.61758700000000033, lng: -83.34982599999999309},
    {lat: 42.61759099999999734, lng: -83.34957399999998984},
    {lat: 42.61761500000000069, lng: -83.34870699999999033},
    {lat: 42.61763899999999694, lng: -83.34789200000000164},
    {lat: 42.61764399999999853, lng: -83.34780000000000655},
    {lat: 42.61770099999999672, lng: -83.34729399999999089},
    {lat: 42.61770599999999831, lng: -83.34690799999999911},
    {lat: 42.61775599999999997, lng: -83.34590899999999181},
    {lat: 42.61772299999999802, lng: -83.34554299999999216},
    {lat: 42.61779800000000051, lng: -83.34453599999999085},
    {lat: 42.61713100000000054, lng: -83.34447999999999013},
    {lat: 42.61555599999999799, lng: -83.34435399999999561},
    {lat: 42.61609299999999934, lng: -83.34211200000000019},
    {lat: 42.61786899999999889, lng: -83.34208799999998973},
    {lat: 42.61787899999999496, lng: -83.34114900000000148},
    {lat: 42.61789399999999972, lng: -83.33967799999999215},
    {lat: 42.61794199999999933, lng: -83.33741899999999703},
    {lat: 42.61399499999999563, lng: -83.33683700000000272},
    {lat: 42.6138869999999983, lng: -83.33683800000000019},
    {lat: 42.61308899999999511, lng: -83.33684499999999673},
    {lat: 42.61092000000000013, lng: -83.33690599999999904},
    {lat: 42.60847400000000107, lng: -83.33680900000000236},
    {lat: 42.60859699999999606, lng: -83.33648399999999867},
    {lat: 42.60816200000000009, lng: -83.33617399999999975},
    {lat: 42.60728799999999694, lng: -83.33611299999999744},
    {lat: 42.60729500000000058, lng: -83.33575100000000191},
    {lat: 42.60663900000000126, lng: -83.33650099999999838},
    {lat: 42.60599099999999595, lng: -83.33724099999999169},
    {lat: 42.60548800000000114, lng: -83.33776299999999537},
    {lat: 42.60496099999999586, lng: -83.33831200000000194},
    {lat: 42.60493199999999803, lng: -83.33902700000000152},
    {lat: 42.60457900000000109, lng: -83.33900799999999265},
    {lat: 42.60444199999999881, lng: -83.33908900000000131},
    {lat: 42.60406799999999805, lng: -83.33903899999999965},
    {lat: 42.6040349999999961, lng: -83.33903999999999712},
    {lat: 42.60395700000000119, lng: -83.33904499999999871},
    {lat: 42.60351299999999952, lng: -83.33907700000000318},
    {lat: 42.60307900000000103, lng: -83.33908199999999056},
    {lat: 42.60287299999999533, lng: -83.33909799999999279},
    {lat: 42.60277599999999865, lng: -83.33908300000000224},
    {lat: 42.60226399999999813, lng: -83.33904299999998955},
    {lat: 42.60182199999999852, lng: -83.33905500000000188},
    {lat: 42.60181800000000152, lng: -83.33965499999999338},
    {lat: 42.60174500000000108, lng: -83.34148600000000329},
    {lat: 42.60172299999999979, lng: -83.34201899999999341},
    {lat: 42.60172199999999521, lng: -83.34223599999999976},
    {lat: 42.60145999999999589, lng: -83.34254699999999616},
    {lat: 42.60105799999999476, lng: -83.34301899999999819},
    {lat: 42.60074499999999631, lng: -83.34340199999999754},
    {lat: 42.60058799999999479, lng: -83.34360399999999913},
    {lat: 42.59579899999999952, lng: -83.34339099999999689},
    {lat: 42.59565800000000024, lng: -83.3435309999999987},
    {lat: 42.59544999999999959, lng: -83.34370400000000245},
    {lat: 42.59537599999999458, lng: -83.34371199999999646},
    {lat: 42.59523799999999483, lng: -83.34367399999999293},
    {lat: 42.59509699999999555, lng: -83.34349100000000021},
    {lat: 42.5950769999999963, lng: -83.3433599999999899},
    {lat: 42.59438199999999597, lng: -83.34333999999999776},
    {lat: 42.59436900000000037, lng: -83.34365400000000079},
    {lat: 42.59430700000000058, lng: -83.34507800000000088},
    {lat: 42.59428700000000134, lng: -83.34551799999999844},
    {lat: 42.59456300000000084, lng: -83.34626099999999838},
    {lat: 42.5947880000000012, lng: -83.34723699999999269},
    {lat: 42.59508799999999695, lng: -83.3472059999999999},
    {lat: 42.59534299999999973, lng: -83.34987199999999063},
    {lat: 42.59504700000000099, lng: -83.34992599999999641},
    {lat: 42.59493499999999955, lng: -83.34994700000000023},
    {lat: 42.59453800000000001, lng: -83.3500179999999915},
    {lat: 42.59424200000000127, lng: -83.3500839999999954},
    {lat: 42.59409099999999881, lng: -83.35013399999999706},
    {lat: 42.59391300000000058, lng: -83.35019400000000189},
    {lat: 42.59369699999999881, lng: -83.35028599999999699},
    {lat: 42.59348800000000068, lng: -83.35042099999999721},
    {lat: 42.59346899999999891, lng: -83.35043399999999281},
    {lat: 42.59313399999999916, lng: -83.35020899999999244},
    {lat: 42.59294099999999617, lng: -83.35057799999999872},
    {lat: 42.59275399999999934, lng: -83.35067699999999036},
    {lat: 42.5927159999999958, lng: -83.35057100000000219},
    {lat: 42.59264399999999995, lng: -83.35062399999999627},
    {lat: 42.59266499999999667, lng: -83.35100299999999152},
    {lat: 42.59229799999999955, lng: -83.35126599999999542},
    {lat: 42.59197400000000044, lng: -83.35146399999999289},
    {lat: 42.59153899999999737, lng: -83.35168399999999167},
    {lat: 42.5911350000000013, lng: -83.35185299999999131},
    {lat: 42.59080399999999855, lng: -83.35196899999999687},
    {lat: 42.59053399999999812, lng: -83.35207799999999168},
    {lat: 42.59034700000000129, lng: -83.35217299999999341},
    {lat: 42.5901360000000011, lng: -83.352374999999995},
    {lat: 42.58976299999999782, lng: -83.3528570000000002},
    {lat: 42.58959899999999976, lng: -83.35300699999999097},
    {lat: 42.58944599999999525, lng: -83.35305900000000179},
    {lat: 42.58929599999999738, lng: -83.35303899999999544},
    {lat: 42.58928900000000084, lng: -83.35356699999999819},
    {lat: 42.58927399999999608, lng: -83.35366700000000151},
    {lat: 42.58926799999999702, lng: -83.35371399999999653},
    {lat: 42.58923599999999965, lng: -83.35374999999999091},
    {lat: 42.58913499999999885, lng: -83.35381399999999985},
    {lat: 42.58857799999999827, lng: -83.35410799999999654},
    {lat: 42.58844500000000011, lng: -83.3540789999999987},
    {lat: 42.58841199999999816, lng: -83.35403900000000021},
    {lat: 42.58790899999999624, lng: -83.35451299999999719},
    {lat: 42.58785499999999757, lng: -83.35460299999999734},
    {lat: 42.58776699999999948, lng: -83.35475300000000232},
    {lat: 42.58761700000000161, lng: -83.3549160000000029},
    {lat: 42.58742300000000114, lng: -83.35509899999999561},
    {lat: 42.5866100000000003, lng: -83.35545899999999619},
    {lat: 42.58649199999999979, lng: -83.35574199999999223},
    {lat: 42.5864739999999955, lng: -83.35578999999999894},
    {lat: 42.58642199999999889, lng: -83.35592900000000327},
    {lat: 42.58630699999999791, lng: -83.35614099999999382},
    {lat: 42.58609899999999726, lng: -83.35638899999999296},
    {lat: 42.58616500000000116, lng: -83.35658300000000054},
    {lat: 42.58610699999999838, lng: -83.35660799999999426},
    {lat: 42.58613799999999827, lng: -83.35683899999999369},
    {lat: 42.58688300000000027, lng: -83.36217299999999852},
    {lat: 42.58198900000000009, lng: -83.36227699999999174},
    {lat: 42.58136799999999766, lng: -83.3617100000000022},
    {lat: 42.57987899999999826, lng: -83.36236599999999441},
    {lat: 42.57930999999999955, lng: -83.36241900000000271},
    {lat: 42.57904399999999612, lng: -83.36235099999998965},
    {lat: 42.57904399999999612, lng: -83.36232799999999088},
    {lat: 42.57905399999999929, lng: -83.36022400000000232},
    {lat: 42.57905600000000135, lng: -83.35968799999999135},
    {lat: 42.57959400000000016, lng: -83.35924500000000137},
    {lat: 42.57956000000000074, lng: -83.35916799999999682},
    {lat: 42.57924299999999818, lng: -83.35845199999999977},
    {lat: 42.57898300000000091, lng: -83.35834499999999991},
    {lat: 42.5789660000000012, lng: -83.35765200000000164},
    {lat: 42.57876499999999709, lng: -83.35718199999999456},
    {lat: 42.57869699999999824, lng: -83.35724999999999341},
    {lat: 42.57858199999999727, lng: -83.35740499999999997},
    {lat: 42.57853699999999719, lng: -83.35752899999999954},
    {lat: 42.57813999999999766, lng: -83.35721599999999398},
    {lat: 42.5779889999999952, lng: -83.35762499999999875},
    {lat: 42.57748699999999786, lng: -83.35747899999999788},
    {lat: 42.57715799999999717, lng: -83.35739900000000091},
    {lat: 42.57686199999999843, lng: -83.35735199999999168},
    {lat: 42.57647300000000001, lng: -83.35737000000000307},
    {lat: 42.57559599999999733, lng: -83.35745399999998995},
    {lat: 42.57544599999999946, lng: -83.35746799999999723},
    {lat: 42.57495699999999772, lng: -83.357451999999995},
    {lat: 42.57436699999999519, lng: -83.35736099999999738},
    {lat: 42.57373299999999716, lng: -83.35726699999999312},
    {lat: 42.57344299999999748, lng: -83.35724799999999846},
    {lat: 42.5731879999999947, lng: -83.35716599999999232},
    {lat: 42.57306200000000018, lng: -83.35704699999999434},
    {lat: 42.57299899999999582, lng: -83.35696799999999484},
    {lat: 42.57298899999999975, lng: -83.35699099999999362},
    {lat: 42.57282999999999618, lng: -83.35715999999999326},
    {lat: 42.57257299999999844, lng: -83.35723099999999874},
    {lat: 42.57220099999999974, lng: -83.35722499999999968},
    {lat: 42.57169999999999987, lng: -83.35720499999999333},
    {lat: 42.57118699999999478, lng: -83.35719100000000026},
    {lat: 42.57084199999999896, lng: -83.35724700000000098},
    {lat: 42.57079499999999683, lng: -83.35704299999999023},
    {lat: 42.57070099999999968, lng: -83.35681799999998987},
    {lat: 42.56966099999999642, lng: -83.35746199999999817},
    {lat: 42.56882900000000092, lng: -83.35743300000000033},
    {lat: 42.5685799999999972, lng: -83.35739799999998922},
    {lat: 42.56655999999999551, lng: -83.35716200000000242},
    {lat: 42.56655500000000103, lng: -83.35661899999999491},
    {lat: 42.56654499999999786, lng: -83.35362899999999797},
    {lat: 42.56654699999999991, lng: -83.35310400000000186},
    {lat: 42.56652499999999861, lng: -83.34942399999999907},
    {lat: 42.56655099999999692, lng: -83.34941299999999842},
    {lat: 42.56655099999999692, lng: -83.3485950000000031},
    {lat: 42.56655099999999692, lng: -83.34813799999999162},
    {lat: 42.56653399999999721, lng: -83.3481259999999935},
    {lat: 42.56653199999999515, lng: -83.34745800000000315},
    {lat: 42.56541099999999744, lng: -83.34737299999999038},
    {lat: 42.56510499999999553, lng: -83.34738299999999356},
    {lat: 42.56499900000000025, lng: -83.34738500000000272},
    {lat: 42.56443000000000154, lng: -83.34739399999999421},
    {lat: 42.56361499999999864, lng: -83.34740800000000149},
    {lat: 42.56341199999999958, lng: -83.34740099999999074},
    {lat: 42.56224399999999974, lng: -83.34738899999999262},
    {lat: 42.5592539999999957, lng: -83.3472059999999999},
    {lat: 42.55786299999999756, lng: -83.34723699999999269},
    {lat: 42.55787999999999727, lng: -83.34668299999999874},
    {lat: 42.55790299999999604, lng: -83.34599799999999448},
    {lat: 42.55791099999999716, lng: -83.34561999999999671},
    {lat: 42.55791999999999575, lng: -83.34517999999999915},
    {lat: 42.55786899999999662, lng: -83.34483099999999922},
    {lat: 42.55784500000000037, lng: -83.34466499999999201},
    {lat: 42.55766500000000008, lng: -83.34410699999999395},
    {lat: 42.55734899999999499, lng: -83.3433119999999974},
    {lat: 42.55722399999999794, lng: -83.34298900000000287},
    {lat: 42.55671600000000154, lng: -83.34167599999999254},
    {lat: 42.55587999999999482, lng: -83.34163999999999817},
    {lat: 42.55521900000000102, lng: -83.34160099999999716},
    {lat: 42.55459700000000112, lng: -83.34157700000000091},
    {lat: 42.55291299999999666, lng: -83.34149699999998973},
    {lat: 42.55215899999999607, lng: -83.34145399999999881},
    {lat: 42.55180699999999661, lng: -83.34144899999999723},
    {lat: 42.55166299999999779, lng: -83.34144700000000228},
    {lat: 42.55106599999999872, lng: -83.34141999999999939},
    {lat: 42.55027899999999619, lng: -83.34136999999999773},
    {lat: 42.54973299999999625, lng: -83.34135100000000307},
    {lat: 42.54731400000000008, lng: -83.34124400000000321},
    {lat: 42.54607999999999635, lng: -83.34122399999999686},
    {lat: 42.54534499999999753, lng: -83.34119900000000314},
    {lat: 42.54357699999999909, lng: -83.34115099999999643},
    {lat: 42.54347800000000035, lng: -83.34113800000000083},
    {lat: 42.5433749999999975, lng: -83.34111999999998943},
    {lat: 42.54305899999999951, lng: -83.34110599999999636},
    {lat: 42.54207999999999856, lng: -83.34104999999999563},
    {lat: 42.54169999999999874, lng: -83.34103899999999499},
    {lat: 42.54129299999999603, lng: -83.34100999999999715},
    {lat: 42.54086600000000118, lng: -83.34099599999998986},
    {lat: 42.54018299999999897, lng: -83.34095599999999138},
    {lat: 42.53998999999999597, lng: -83.34094999999999231},
    {lat: 42.53972699999999918, lng: -83.34093199999999513},
    {lat: 42.53951500000000152, lng: -83.34091800000000205},
    {lat: 42.53886199999999462, lng: -83.34089399999999159},
    {lat: 42.53845099999999491, lng: -83.34086800000000039},
    {lat: 42.53804600000000136, lng: -83.34085999999999217},
    {lat: 42.53721099999999922, lng: -83.34082699999999022},
    {lat: 42.53616199999999736, lng: -83.34077399999999614},
    {lat: 42.53604800000000097, lng: -83.34662099999999896},
    {lat: 42.53567299999999562, lng: -83.34660300000000177},
    {lat: 42.53566199999999498, lng: -83.34724299999999175},
    {lat: 42.53598799999999613, lng: -83.3472500000000025},
    {lat: 42.5359849999999966, lng: -83.34727300000000128},
    {lat: 42.53590399999999505, lng: -83.34796899999999198},
    {lat: 42.53583499999999873, lng: -83.348598999999993},
    {lat: 42.53579299999999819, lng: -83.34921500000000094},
    {lat: 42.53591799999999523, lng: -83.34924900000000036},
    {lat: 42.53591799999999523, lng: -83.35004699999998934},
    {lat: 42.53573199999999588, lng: -83.3548409999999933},
    {lat: 42.53572499999999934, lng: -83.35536299999999699},
    {lat: 42.53569299999999487, lng: -83.35739599999999427},
    {lat: 42.53566500000000161, lng: -83.36019899999999438},
    {lat: 42.53566199999999498, lng: -83.36041600000000074},
    {lat: 42.53538400000000053, lng: -83.36040699999999504},
    {lat: 42.53450300000000084, lng: -83.36037100000000066},
    {lat: 42.53360099999999733, lng: -83.36033299999999713},
    {lat: 42.5332429999999988, lng: -83.36031799999999237},
    {lat: 42.53318000000000154, lng: -83.36177800000000104},
    {lat: 42.53319299999999714, lng: -83.36180999999999131},
    {lat: 42.53306200000000104, lng: -83.36584299999999814},
    {lat: 42.52823999999999671, lng: -83.36557899999999677},
    {lat: 42.52823999999999671, lng: -83.36559699999999395},
    {lat: 42.52822899999999606, lng: -83.36596500000000276},
    {lat: 42.52822199999999953, lng: -83.36633199999999988},
    {lat: 42.52821899999999999, lng: -83.36648699999999224},
    {lat: 42.5281880000000001, lng: -83.36747199999999225},
    {lat: 42.52813899999999592, lng: -83.36912699999999177},
    {lat: 42.52812600000000032, lng: -83.36952699999999084},
    {lat: 42.52808100000000024, lng: -83.3709920000000011},
    {lat: 42.5280519999999953, lng: -83.3716659999999905},
    {lat: 42.52803300000000064, lng: -83.37231299999999123},
    {lat: 42.52799399999999963, lng: -83.37371299999999508},
    {lat: 42.52796000000000021, lng: -83.37500500000000159},
    {lat: 42.5279029999999949, lng: -83.37750899999998921},
    {lat: 42.52788799999999725, lng: -83.3784909999999968},
    {lat: 42.52787999999999613, lng: -83.37893699999999342},
    {lat: 42.52787499999999454, lng: -83.3790779999999927},
    {lat: 42.52790000000000248, lng: -83.37922199999999862},
    {lat: 42.52802799999999905, lng: -83.37943399999998917},
    {lat: 42.52807500000000118, lng: -83.37955199999998968},
    {lat: 42.52810300000000154, lng: -83.379651999999993},
    {lat: 42.52810600000000107, lng: -83.37972800000000007},
    {lat: 42.52807699999999613, lng: -83.37989600000000223},
    {lat: 42.52804599999999624, lng: -83.37995599999999286},
    {lat: 42.52798399999999646, lng: -83.38007899999999495},
    {lat: 42.5279209999999992, lng: -83.38026099999999019},
    {lat: 42.52788799999999725, lng: -83.38044699999998954},
    {lat: 42.52785799999999483, lng: -83.3807029999999969},
    {lat: 42.52780800000000028, lng: -83.38112199999999063},
    {lat: 42.52777899999999534, lng: -83.38203000000000031},
    {lat: 42.52770199999999789, lng: -83.38439300000000287},
    {lat: 42.52769699999999631, lng: -83.38458500000000129},
    {lat: 42.52819399999999916, lng: -83.38453699999999458},
    {lat: 42.52830399999999855, lng: -83.38453499999999963},
    {lat: 42.52848199999999679, lng: -83.38454000000000121},
    {lat: 42.52900499999999795, lng: -83.38454000000000121},
    {lat: 42.53101699999999852, lng: -83.38455100000000186},
    {lat: 42.53140299999999741, lng: -83.38453199999999299},
    {lat: 42.53383499999999628, lng: -83.384799000000001},
    {lat: 42.53495399999999904, lng: -83.38491499999999235},
    {lat: 42.53488199999999608, lng: -83.38820499999999925},
    {lat: 42.53468300000000113, lng: -83.39467599999998981},
    {lat: 42.53799099999999811, lng: -83.39478799999999126},
    {lat: 42.53781099999999782, lng: -83.39976399999999046},
    {lat: 42.54065399999999642, lng: -83.39991599999999039},
    {lat: 42.54079899999999981, lng: -83.39997499999999775},
    {lat: 42.5411319999999975, lng: -83.40000999999999465},
    {lat: 42.54134799999999927, lng: -83.40004600000000323},
    {lat: 42.54148599999999902, lng: -83.4001299999999901},
    {lat: 42.54160699999999906, lng: -83.40022999999999342},
    {lat: 42.54168099999999697, lng: -83.40032499999999516},
    {lat: 42.54172399999999499, lng: -83.40034699999999646},
    {lat: 42.541762999999996, lng: -83.4003670000000028},
    {lat: 42.54187100000000044, lng: -83.4003670000000028},
    {lat: 42.54196699999999964, lng: -83.40033400000000086},
    {lat: 42.54200499999999607, lng: -83.40029099999999573},
    {lat: 42.54205299999999568, lng: -83.40023800000000165},
    {lat: 42.54214899999999489, lng: -83.40013799999999833},
    {lat: 42.54227699999999857, lng: -83.40005200000000229},
    {lat: 42.54332999999999743, lng: -83.40006799999999032},
    {lat: 42.54361000000000104, lng: -83.40005699999998967},
    {lat: 42.54429299999999614, lng: -83.40008499999999003},
    {lat: 42.54482600000000048, lng: -83.40010699999999133},
    {lat: 42.5454379999999972, lng: -83.40013199999999927},
    {lat: 42.54654800000000137, lng: -83.40019499999999653},
    {lat: 42.54713799999999679, lng: -83.40022799999999847},
    {lat: 42.54907000000000039, lng: -83.40033199999999169},
    {lat: 42.54912799999999606, lng: -83.39884499999999434},
    {lat: 42.54923399999999845, lng: -83.39559099999999603},
    {lat: 42.54943099999999845, lng: -83.39539399999999603},
    {lat: 42.55284799999999734, lng: -83.39553399999999783},
    {lat: 42.55419299999999794, lng: -83.3956230000000005},
    {lat: 42.55568799999999641, lng: -83.39571999999999719},
    {lat: 42.55649499999999819, lng: -83.39577400000000296},
    {lat: 42.56067999999999785, lng: -83.39596499999998969},
    {lat: 42.56066500000000019, lng: -83.39611099999999055},
    {lat: 42.56117499999999865, lng: -83.39612400000000036},
    {lat: 42.56118499999999472, lng: -83.39598900000000015},
    {lat: 42.56120299999999901, lng: -83.39598900000000015},
    {lat: 42.56166100000000085, lng: -83.39601100000000145},
    {lat: 42.56169099999999617, lng: -83.39550799999999242},
    {lat: 42.56193199999999877, lng: -83.39174299999999107},
    {lat: 42.56201399999999779, lng: -83.39036999999999011},
    {lat: 42.56203800000000115, lng: -83.3900509999999997},
    {lat: 42.56218700000000155, lng: -83.38736799999999505},
    {lat: 42.56225200000000086, lng: -83.38617699999998933},
    {lat: 42.56406399999999479, lng: -83.38626099999999042},
    {lat: 42.56408700000000067, lng: -83.38560799999999062},
    {lat: 42.56414099999999934, lng: -83.38411899999999832},
    {lat: 42.56409499999999468, lng: -83.38386899999999002},
    {lat: 42.56421299999999519, lng: -83.38208799999999599},
    {lat: 42.56552699999999589, lng: -83.38214800000000082},
    {lat: 42.56563599999999781, lng: -83.38215599999999483},
    {lat: 42.56592200000000048, lng: -83.38143900000000031},
    {lat: 42.56762399999999502, lng: -83.38148900000000197},
    {lat: 42.56931300000000107, lng: -83.38157999999999959},
    {lat: 42.56945499999999782, lng: -83.38159100000000024},
    {lat: 42.57151299999999594, lng: -83.38169399999999598},
    {lat: 42.57159199999999544, lng: -83.38170099999999252},
    {lat: 42.57159000000000049, lng: -83.38209700000000169},
    {lat: 42.57188399999999717, lng: -83.38209899999999664},
    {lat: 42.57271099999999819, lng: -83.38214499999999418},
    {lat: 42.57277399999999545, lng: -83.38195499999999072},
    {lat: 42.57279299999999722, lng: -83.38183599999999274},
    {lat: 42.5729779999999991, lng: -83.38187899999999786},
    {lat: 42.57297200000000004, lng: -83.38195399999999324},
    {lat: 42.5730000000000004, lng: -83.38194899999999166},
    {lat: 42.57301999999999964, lng: -83.38193799999999101},
    {lat: 42.57303399999999982, lng: -83.38190500000000327},
    {lat: 42.57305300000000159, lng: -83.38188699999999187},
    {lat: 42.57306699999999466, lng: -83.38192599999999288},
    {lat: 42.5731049999999982, lng: -83.38192899999999952},
    {lat: 42.57311999999999585, lng: -83.38194399999999007},
    {lat: 42.57314499999999668, lng: -83.38202499999999873},
    {lat: 42.57321299999999553, lng: -83.38200499999999238},
    {lat: 42.57330899999999474, lng: -83.38201099999999144},
    {lat: 42.57333399999999557, lng: -83.38201800000000219},
    {lat: 42.57344399999999496, lng: -83.38210200000000327},
    {lat: 42.57347599999999943, lng: -83.38212000000000046},
    {lat: 42.57353200000000015, lng: -83.38219699999999079},
    {lat: 42.57356300000000005, lng: -83.38220799999999144},
    {lat: 42.57362399999999525, lng: -83.3822100000000006},
    {lat: 42.5736479999999986, lng: -83.38224300000000255},
    {lat: 42.57365000000000066, lng: -83.38226899999999375},
    {lat: 42.57368899999999456, lng: -83.38229799999999159},
    {lat: 42.57376099999999752, lng: -83.38231999999999289},
    {lat: 42.57378200000000135, lng: -83.38234199999999419},
    {lat: 42.57379199999999742, lng: -83.38236700000000212},
    {lat: 42.57379499999999695, lng: -83.38241499999999462},
    {lat: 42.57380099999999601, lng: -83.38243799999999339},
    {lat: 42.57381999999999778, lng: -83.38243399999998928},
    {lat: 42.57385800000000131, lng: -83.38239599999999996},
    {lat: 42.57390999999999792, lng: -83.38238400000000183},
    {lat: 42.57392999999999716, lng: -83.38237099999999202},
    {lat: 42.57392199999999605, lng: -83.38233900000000176},
    {lat: 42.57393799999999828, lng: -83.38227100000000291},
    {lat: 42.57395199999999846, lng: -83.38223499999999433},
    {lat: 42.57419799999999555, lng: -83.3819079999999957},
    {lat: 42.57447499999999962, lng: -83.38170900000000074},
    {lat: 42.57456200000000024, lng: -83.38165599999999245},
    {lat: 42.5747870000000006, lng: -83.38219099999999173},
    {lat: 42.57488099999999775, lng: -83.38218999999999426},
    {lat: 42.57490899999999812, lng: -83.3821489999999983},
    {lat: 42.5757070000000013, lng: -83.38217899999999361},
    {lat: 42.57591199999999532, lng: -83.38215599999999483},
    {lat: 42.57589600000000019, lng: -83.38245899999999722},
    {lat: 42.57612699999999961, lng: -83.39147599999999727},
    {lat: 42.57536999999999949, lng: -83.39224000000000103},
    {lat: 42.57522199999999657, lng: -83.39237199999999461},
    {lat: 42.57481399999999638, lng: -83.39319600000000321},
    {lat: 42.57458899999999602, lng: -83.39761399999999014},
    {lat: 42.57460799999999779, lng: -83.40156600000000253},
    {lat: 42.5744410000000002, lng: -83.40878699999998958},
    {lat: 42.57372999999999763, lng: -83.41438300000000083},
    {lat: 42.57351299999999839, lng: -83.41522199999999998},
    {lat: 42.57356300000000005, lng: -83.41551199999999255},
    {lat: 42.57408900000000074, lng: -83.41605799999999249},
    {lat: 42.57444599999999468, lng: -83.41617899999999963},
    {lat: 42.5745679999999993, lng: -83.41621299999999906},
    {lat: 42.57478599999999602, lng: -83.41641899999999055},
    {lat: 42.5748919999999984, lng: -83.41645400000000166},
    {lat: 42.57498599999999556, lng: -83.4165660000000031},
    {lat: 42.57521399999999545, lng: -83.41673899999999264},
    {lat: 42.5751679999999979, lng: -83.41687000000000296},
    {lat: 42.57509499999999747, lng: -83.41713799999999424},
    {lat: 42.57507299999999617, lng: -83.41721599999999626},
    {lat: 42.57499099999999714, lng: -83.41751999999999612},
    {lat: 42.57604200000000105, lng: -83.41755799999999965},
    {lat: 42.57604699999999553, lng: -83.41759700000000066},
    {lat: 42.57626099999999525, lng: -83.41761199999999121},
    {lat: 42.5762719999999959, lng: -83.41758000000000095},
    {lat: 42.57702700000000107, lng: -83.41698799999998926},
    {lat: 42.57705299999999937, lng: -83.41700199999999654},
    {lat: 42.57772800000000046, lng: -83.41812000000000182},
    {lat: 42.57802799999999621, lng: -83.41850099999999202},
    {lat: 42.57906899999999695, lng: -83.42054699999999912},
    {lat: 42.5790579999999963, lng: -83.4209419999999966},
    {lat: 42.57905299999999471, lng: -83.42115400000000136},
    {lat: 42.57915699999999504, lng: -83.42136599999999191},
    {lat: 42.57919499999999857, lng: -83.42151299999999026},
    {lat: 42.57987199999999461, lng: -83.42149499999999307},
    {lat: 42.57998699999999559, lng: -83.42150499999999624},
    {lat: 42.58173399999999731, lng: -83.4216210000000018},
    {lat: 42.58204999999999529, lng: -83.42163499999999487},
    {lat: 42.58444999999999681, lng: -83.42148699999999906},
    {lat: 42.58486800000000017, lng: -83.42170199999999625},
    {lat: 42.58510499999999865, lng: -83.41443699999999239},
    {lat: 42.58538000000000068, lng: -83.41446799999999939},
    {lat: 42.58584599999999654, lng: -83.41450399999999377},
    {lat: 42.58872900000000072, lng: -83.41472899999999413},
    {lat: 42.58871399999999596, lng: -83.41518999999999551},
    {lat: 42.58867000000000047, lng: -83.41654499999999928},
    {lat: 42.58866899999999589, lng: -83.41686899999999127},
    {lat: 42.58867899999999906, lng: -83.4172360000000026},
    {lat: 42.58871399999999596, lng: -83.41753099999999677},
    {lat: 42.5887649999999951, lng: -83.41785099999999886},
    {lat: 42.58889899999999784, lng: -83.41829699999999548},
    {lat: 42.5892599999999959, lng: -83.41930000000000689},
    {lat: 42.58955699999999922, lng: -83.42007699999999204},
    {lat: 42.58969199999999944, lng: -83.42044899999999075},
    {lat: 42.58989799999999804, lng: -83.42098299999999256},
    {lat: 42.59006399999999815, lng: -83.42145099999999047},
    {lat: 42.59023799999999937, lng: -83.42190800000000195},
    {lat: 42.59057500000000118, lng: -83.42197000000000173},
    {lat: 42.59061099999999556, lng: -83.42208399999999813},
    {lat: 42.59084000000000003, lng: -83.42233499999998969},
    {lat: 42.59143399999999957, lng: -83.42236699999999416},
    {lat: 42.59182299999999799, lng: -83.42224299999999459},
    {lat: 42.59186899999999554, lng: -83.42218199999999229},
    {lat: 42.59196000000000026, lng: -83.42218199999999229},
    {lat: 42.59199399999999969, lng: -83.4221549999999894},
    {lat: 42.59212000000000131, lng: -83.42205799999999272},
    {lat: 42.59223499999999518, lng: -83.42205799999999272},
    {lat: 42.59227999999999525, lng: -83.42196500000000015},
    {lat: 42.59278299999999717, lng: -83.42196199999999351},
    {lat: 42.59310299999999927, lng: -83.42205899999999019},
    {lat: 42.59328599999999909, lng: -83.42218299999998976},
    {lat: 42.59346299999999985, lng: -83.42216999999999416},
    {lat: 42.59354700000000093, lng: -83.42216299999999762},
    {lat: 42.59355899999999906, lng: -83.42192799999999409},
    {lat: 42.59383400000000108, lng: -83.42163999999999646},
    {lat: 42.59533299999999656, lng: -83.42007399999999961},
    {lat: 42.59674299999999647, lng: -83.41997899999999788},
    {lat: 42.5968119999999999, lng: -83.42064599999999075},
    {lat: 42.59679299999999813, lng: -83.42280799999998919},
    {lat: 42.59716699999999889, lng: -83.42287999999999215},
    {lat: 42.59734299999999507, lng: -83.4229129999999941},
    {lat: 42.59835299999999592, lng: -83.42270099999998934},
    {lat: 42.59911100000000062, lng: -83.42253800000000297},
    {lat: 42.59940399999999983, lng: -83.42260899999999424},
    {lat: 42.60002499999999515, lng: -83.42297700000000304},
    {lat: 42.60024699999999598, lng: -83.42311800000000233},
    {lat: 42.606383000000001, lng: -83.42298699999999201}
  ];

  // Construct the polygon.
  districtBoundary = new google.maps.Polygon({
    paths: boundaryCoords,
    strokeColor: '#FF0000',
    strokeOpacity: 0.8,
    strokeWeight: 2,
    fillColor: '#FF0000',
    fillOpacity: 0.35
  });
  districtBoundary.setMap(map);
  var geocoder = new google.maps.Geocoder();
  // Create the autocomplete object, restricting the search to geographical
  // location types.
  autocomplete = new google.maps.places.Autocomplete(
      /** @type {!HTMLInputElement} */(document.getElementById('autocomplete')),
      {types: ['address']});

  // When the user selects an address from the dropdown, populate the address
  // fields in the form.
  autocomplete.addListener('place_changed', parseAddress);
  begin();
}

// Verify the provided address and check whether it falls
// within the map boundaries.
function parseAddress() {
  begin();
  // Get the place details from the autocomplete object.
  var place = autocomplete.getPlace();
  // If no street number is provided, ask for a valid address.
  if (place.address_components[0]["types"][0] != "street_number") {
	outputLeft.innerHTML = '<img src="alert.png" alt="alert" width="50" class="alert"><span class="alert">Please provide a valid address.</span>';
	return;
  }
  outputLeft.innerHTML = '<span class="alert">Calculating...</span><img src="loading.gif" alt="loading" width="50" class="alert">';
  // Get each component of the address from the place details
  // and fill in the corresponding value.
  for (var i = 0; i < place.address_components.length; i++) {
    var addressType = place.address_components[i].types[0];
	if (componentForm.indexOf(addressType) > -1) {
      var val = place.address_components[i];
      parsedAddress[addressType] = val;
    }
  }
  // Find out if the provided address is within the polygon.
  mapCheck = google.maps.geometry.poly.containsLocation(place.geometry.location, districtBoundary);
  
  dbCheck = undefined;
  marker.setMap(null);
  // Set the marker on the map.
  var image =
        mapCheck ?
        'flag_green.png' :
        'flag_red.png';

   marker = new google.maps.Marker({
      position: place.geometry.location,
      map: map,
      icon: image
    });
	map.panTo(place.geometry.location);
	parseFile();
}

// Bias the autocomplete object to the user's geographical location,
// as supplied by the browser's 'navigator.geolocation' object.
function geolocate() {
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(function(position) {
      var geolocation = {
        lat: position.coords.latitude,
        lng: position.coords.longitude
      };
      var circle = new google.maps.Circle({
        center: geolocation,
        radius: position.coords.accuracy
      });
      autocomplete.setBounds(circle.getBounds());
    });
  }
}

// Search an address component for a given term.
function isIncluded(needle, haystack) {
	if (haystack["long_name"].indexOf(needle) > -1 || haystack["short_name"].indexOf(needle) > -1)
		return true;
	else
		return false;
}


// Parse the database file and determine whether the provided address is included.
function parseFile() {
    result = Papa.parse("StreetDatabase.csv", {
	download: true,
	complete: function(results) {
		var data = results.data;
		var streetFound, school, notes, parsedMin, parsedMax, parsedList, parsedInput;
		// Output results of the map check.
		outputLeft.innerHTML = '<span class="alert">Map Check: </span><img src="' + (mapCheck ? 'checked.png" alt="pass"' : 'cross.png" alt="fail"') + ' width="50" class="alert">' + (mobile ? "<br>" : "") + '<span class="alert"' + (mobile ? '' : ' style="padding-left:50px;"') + '>Database Check: </span>';
		// Go through each row on the database.
		for (var i = 1; i < data.length; i++) {
			if (isIncluded(data[i][0], parsedAddress["route"]) && isIncluded(data[i][3], parsedAddress["postal_code"])) {
				school = data[i][1];
				notes = data[i][4];
				parsedMin = parseInt(data[i][5]);
				parsedMax = parseInt(data[i][6]);
				parsedList = data[i][7].split(";");
				parsedInput = {long_name:parseInt(parsedAddress["street_number"]["long_name"]), short_name:parseInt(parsedAddress["street_number"]["short_name"])};				
				
				// The address lies within the boundaries if
				// 1) there are no minimum or maximum values and there is no list of values.
				// 2) the house number is within the minimum and maximum values. 
				// 3) the house number is included in the list of house numbers.
				if (parsedList == "" && ((isNaN(parsedMin) && isNaN(parsedMax)) || (parsedMin <= parsedInput["long_name"] && parsedInput["long_name"] <= parsedMax) || (parsedMin <= parsedInput["short_name"] && parsedInput["short_name"] <= parsedMax))) {
					streetFound = true;
					houseInside(school, notes);
					break;
				} else if (parsedList != "") {
					for (var k = 0; k < parsedList.length; k++) {
						if (parsedList[k] == parsedInput["long_name"] || parsedList[k] == parsedInput["short_name"]) {
							streetFound = true;
							houseInside(school, notes);
							break;
						}
					}
				}
			}
		}
		if (!streetFound) {
			houseNotFound();
		}
		// Determine whether both tests produced the same result.
		if (mapCheck != dbCheck) {
			outputRight.innerHTML += '<p style="color:red;">Conflicting information. Please call the district to confirm.</p>';
		}
		document.getElementById('reset').style.visibility = 'visible';
		
	}
});
}

// Output appropriate information when the address is found in the database.
function houseInside(school, notes) {
	// Clean up the school and put it in HTML format.
	var elem2, middle, high;	
	if (school == "Doherty") {		
		elem2 = "Sheiko Elementary School";
		middle = "Orchard Lake Middle School";
	} else if (school == "Roosevelt") {
		elem2 = "Roosevelt Elementary School";
		middle = "Abbott Middle School";
	} else if (school == "Gretchko") {
		elem2 = "Scotch Elementary School";
		middle = "Abbott Middle School";
	}
	school += " Elementary School";
	school = "<ul><li>Grades PK-2: " + school + "</li><li>3-5: " + elem2 + "</li><li>6-8: " + middle + "</li><li>9-12: West Bloomfield High School</li></ul>";
	dbCheck = true;
	// Show any notes that exist.
	if (notes != "")
		notes = '<p style="color:orange;">Notes: ' + notes + "</p>";
	outputLeft.innerHTML += '<img src="checked.png" alt="pass" width="50" class="alert">' + notes;
	outputRight.innerHTML = '<p id="result">Address ' + (mapCheck ? "confirmed" : "found in database") + '.</p>' + school;
}

// Output appropriate information if the address is not found in the database.
function houseNotFound() {
	dbCheck = false;
	outputLeft.innerHTML += '<img src="cross.png" alt="fail" width="50" class="alert">';
	outputRight.innerHTML = '<p id="result">Address not in ' + (mapCheck ? "database" : "West Bloomfield School District") + ".</p>";
}


    </script>
    <script src="https://maps.googleapis.com/maps/api/js?libraries=geometry,places&callback=initialize&key=AIzaSyBZo424j_xFmRXEPIacXI1oyyBbJohrCGQ"
        async defer></script>
	<script src="papaparse.min.js"></script>
  </body>
</html>